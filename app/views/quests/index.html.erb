<% provide(:title, 'Quests') %>
<h1>Quests</h1>

<%= will_paginate %>

<table class="quests">
  <% @quests.each do |quest| %>
    <tr>
      <td>
        <%= link_to quest.name, quest %>
        <% if current_user && current_user.admin? %>
        | <%= link_to "delete", quest, method: :delete,
                                data: { confirm: "As an Admin, are you sure you want to delete this quest?" } %>
        <% end %>
      </td>
      <td><%= quest.description.split("\n")[0] %></td>
      <% if !current_user.player.quest_acceptances.find_by(quest_id: quest[:id]) %>
        <td><%= link_to "Accept", onclick: current_user.player.accept(quest), id: "accept_quest" %></td>
      <% else %>
        <td id="accepted">Accepted</td>
      <% end %>
    </tr>
  <% end %>
</table>

<%= will_paginate %>